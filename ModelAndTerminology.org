#+title: Anatomy of PyCS Command Lines as Used by csPlayers
#+DATE: <2026-02-17 Tue 16:04>
#+AUTHOR: Mohsen BANAN
#+OPTIONS: toc:4

#+BEGINNOT: b:org:pypi:readme/topControls :pkgName "csPlayer" :comment "basic"

|----------------------+------------------------------------------------------------------|
| ~Blee Panel Controls~: | [[elisp:(show-all)][Show-All]] : [[elisp:(org-shifttab)][Overview]] : [[elisp:(progn (org-shifttab) (org-content))][Content]] : [[elisp:(delete-other-windows)][(1)]] : [[elisp:(progn (save-buffer) (kill-buffer))][S&Q]] : [[elisp:(save-buffer)][Save]]  : [[elisp:(kill-buffer)][Quit]]  : [[elisp:(bury-buffer)][Bury]] |
| ~Panel Links~:         | [[file:./py3/panels/bisos.csPlayer/_nodeBase_/fullUsagePanel-en.org][Repo Blee Panel]]                                                  |
| ~See Also~:            | [[https://pypi.org/project/bisos.csPlayer][At PYPI]] : [[https://github.com/bisos-pip/pycs][bisos.csPlayer]]                                         |
|----------------------+------------------------------------------------------------------|

#+END:


* Overview

BISOS csPlayer is rooted in the model of interactive creation of command lines and running them.
While the common structure of Command Line Interface (CLI) is assumed to be understood,
it often is not. The common vocabulary used to refer to the anatomy of a command line is a mess and scattered
all over the place.

In the context of PyCS and csPlayers, we have created our own reference model with precise vocabulary
and terminology.

The concepts, terminology and acronyms presented here are (should be) consistently used in our python
code in this package and in all related packages.

#+BEGIN: b:org:pypi:readme/pkgDocumentation :pkgName "csPlayer-cs" :comment "basic"

# PYPI Documentation Comes Here in _description.org
#+END:

* Related Resources

| bisos Panel | [[file:/bisos/panels/bisos-core/bisos-pip/bisos.csPlayer/_nodeBase_/fullUsagePanel-en.org]] |
|             |                                                                                         |


* Table of Contents     :TOC:
- [[#overview][Overview]]
- [[#related-resources][Related Resources]]
- [[#common-folklore-and-vocabulary-of-command-line----a-mess][Common Folklore and Vocabulary of Command Line -- A Mess]]
- [[#anatomy-structure-and-terminology-of-bisos-pycs-and-csplayer-command-line][Anatomy, Structure and Terminology of BISOS-PyCS and csPlayer Command Line]]
- [[#structure-of-bisos-pycs-command-line][Structure of BISOS-PyCS Command Line]]
- [[#concepts-and-terminology][Concepts and Terminology]]
  - [[#elaborations][Elaborations]]
- [[#input-syntax-of-values-of-parameters-and-arguments----python-literals][Input Syntax of Values of Parameters and Arguments -- Python Literals]]
- [[#output-syntax-of-values-of-stdout-of-csxus----python-literals][Output Syntax of Values of stdout of CSXUs -- Python Literals]]
- [[#audit-trailed-running-of-csxus][Audit Trailed Running of CSXUs]]
  - [[#stand-alone-audittrail-runs][Stand Alone AuditTrail Runs]]
  - [[#serial-audittrail-runs][Serial AuditTrail Runs]]
  - [[#parallel-audittrail-runs][Parallel AuditTrail Runs]]
- [[#web-csplayer----csplayerperf-cslineinvoker-csplayerui][Web csPlayer -- csPlayerPerf, csLineInvoker, csPlayerUi]]
  - [[#cslineinvoker----react][csLineInvoker -- React]]
  - [[#csplayerperf----django][csPlayerPerf -- Django]]
  - [[#csplayerui----gatsby][csPlayerUI -- Gatsby]]
- [[#remote-operation-cmnds----ro-cmnds][Remote Operation Cmnds -- RO-Cmnds]]
  - [[#rpyc-operations][RPyC Operations]]
  - [[#rpyc-invoker][RPyC Invoker]]
  - [[#rpyc-performer][RPyC Performer]]
  - [[#drf-operations][DRF Operations]]
  - [[#drf-invoker][DRF Invoker]]
  - [[#drf-performer][DRF Performer]]

* Common Folklore and Vocabulary of Command Line -- A Mess

Dating back to K&R and getopt and argc and argv, arg[0] was the command name and the rest were arguments.

There were simplistic references to options and parameters mixed in with
flags and positional arguments.

Later came the notion of commands having sub-commands and the model of things like:

#+BEGIN_EXAMPLE
git           -c user.name="John Doe"       commit            -m  'My message'
<commandName>    <commandArguments>     <subCommandName>  <subcommandArguments>
#+END_EXAMPLE

Then came python with argparse with its own notions of arguments, parameters and options and flags.

The existing vocabulary for Unix command line structure is a mess. Different sources use different terms 
for the same concepts:
- "arguments" vs "parameters" vs "options" vs "flags" - all used interchangeably
- "positional arguments" vs "operands"
- "short options" vs "short flags" vs "short parameters"

Additionally, different tools have evolved with different conventions:
- K&R/getopt era used simple terms (argv, argc)
- POSIX added more structure but wasn't strictly enforced
- GNU tools added long options (--flag)
- Different tools (git, docker, python) all have different conventions

This inconsistency and overlapping terminology motivated the creation of a clear, precise vocabulary
for command line structure in the BISOS-PyCS and csPlayer ecosystem.


* Anatomy, Structure and Terminology of BISOS-PyCS and csPlayer Command Line

With BISOS-PyCS command lines, we introduce our own terminology for command lines in general.

In general, what gets executed by the shell we call an eXecution Unit (xu).
The entire line delivered to the shell is called an xuLine.
An xuLine consists of:

#+BEGIN_EXAMPLE
xuLine =  <xuName>  <xuParameters> <command>  <commandParameters> <positionalArguments>
#+END_EXAMPLE

Having established the general structure of a command line, we now focus on csxuLine
(Command Services eXecution Unit) as:

* Structure of BISOS-PyCS Command Line

PyCS command-line has the following general structure:

#+BEGIN_EXAMPLE
csxuLine =  <csxuName>  <csxuParameters> -i <commandName>   <commandParameters> -- <positionalArguments>
#+END_EXAMPLE

In this csxu model, the commandName is a parameter. It can be specified as -i <commandName> or
as --invoke <commandName>.

The above order is not enforced; the same csxuLine could also be:


#+BEGIN_EXAMPLE
csxuLine =  <csxuName>  <csxuParameters>  <commandParameters> -i <commandName>  <positionalArguments>
#+END_EXAMPLE

csxuParameters apply to all commands.
commandParameters are specific to the specified commandName.



We are distinguishing between *parameters* (take values), *options* (don't take values), and *arguments* (positional)

The general form of Parameters, Options and Arguments is:

*Parameters* are specified by "--" or "-" and take values.

|----------------------+-------------------------------+--------------+------------------|
| xu Element           | Description                   | Example      | Argparse Mapping |
|----------------------+-------------------------------+--------------+------------------|
| Long Form Parameter  | Assign a value to a parameter | --bpo=value  |                  |
| Long Form Parameter  |                               | --bpo value  |                  |
| Short Form Parameter |                               | -b value     |                  |
|----------------------+-------------------------------+--------------+------------------|

*Options* are parameters without values.

|-------------------+----------------------------+--------------+------------------|
| xu Element        | Description                | Example      | Argparse Mapping |
|-------------------+----------------------------+--------------+------------------|
| Long Form Option  | AKA Flag, enables/disables | --help       |                  |
| Short Form Option | Options don't have values  | -h           |                  |
|                   |                            | -v (verbose) |                  |
|-------------------+----------------------------+--------------+------------------|

*Arguments* are a list (ordered, positional) that are delivered to Cmnds.

|----------------------+--------------------------+-------------+------------------|
| xu Element           | Description              | Example     | Argparse Mapping |
|----------------------+--------------------------+-------------+------------------|
| Arguments            | Are ordered (positional) | file1 fileN |                  |
| Positional Arguments |                          |             |                  |
|----------------------+--------------------------+-------------+------------------|


* Concepts and Terminology

|----------------+---------------------------------+-----------------+------------------------------------------|
| Concept        | Full Name                       | Example         | Description                              |
|----------------+---------------------------------+-----------------+------------------------------------------|
| [[xu]]             | eXecution Unit                  | git             | Any Command, union of foreign+csxu+csMod |
|----------------+---------------------------------+-----------------+------------------------------------------|
| [[xuLine]]         | XU Command-Line                 |                 | The complete command-line to be [[run]]      |
|----------------+---------------------------------+-----------------+------------------------------------------|
| [[run]]            |                                 |                 | The generic concept of execting xuLine   |
|----------------+---------------------------------+-----------------+------------------------------------------|
| csxu           | Command Services eXecution Unit | facter.cs       | The executable of CS itself              |
|----------------+---------------------------------+-----------------+------------------------------------------|
| csxuName       |                                 |                 | Union of csxuName.{cs,pcs.spcs}          |
|----------------+---------------------------------+-----------------+------------------------------------------|
| csxuName.cs    |                                 | facter.cs       | The name of a Command or Service csxu    |
|----------------+---------------------------------+-----------------+------------------------------------------|
| [[csxuName.pcs]]   | Planted                         | facter.pcs      | A Planted csxu.                          |
|----------------+---------------------------------+-----------------+------------------------------------------|
| [[csxuName.spcs]]  | Spread Planted                  | reactProc.spcs  | A Spread Planted csxu.                   |
|----------------+---------------------------------+-----------------+------------------------------------------|
| csxuParams     | csxu Parameters                 | --log=30        |                                          |
|----------------+---------------------------------+-----------------+------------------------------------------|
| cmnd           | Command                         | -i factName     | The class method that performs cmndName  |
|----------------+---------------------------------+-----------------+------------------------------------------|
| cmndName       | Command Name                    | factName        | The string that appears after --invoke   |
|----------------+---------------------------------+-----------------+------------------------------------------|
| cmndParams     | Command Parameters              |                 | Params Specific to Cmnd                  |
|----------------+---------------------------------+-----------------+------------------------------------------|
| cmndArgs       | Command Arguments               |                 | Args Specific to Cmnd                    |
|----------------+---------------------------------+-----------------+------------------------------------------|
| [[csxuModPlayers]] | csxu Module Players             | facterModule.cs |                                          |
|                |                                 | soncli.cs       |                                          |
|----------------+---------------------------------+-----------------+------------------------------------------|
| csxuModules    |                                 | facterDisks.py  |                                          |
|----------------+---------------------------------+-----------------+------------------------------------------|
| adoptedModules |                                 | aSonModule.py   |                                          |
|----------------+---------------------------------+-----------------+------------------------------------------|
| [[csModules]]      | CS Module                       |                 | Union of csxuModules+AdoptedModules      |
|                |                                 |                 | csMod maps to a csxuModPlayers as well   |
|----------------+---------------------------------+-----------------+------------------------------------------|
| csModParams    | CS Module Parameters            |                 | Params Specific to Module                |
|----------------+---------------------------------+-----------------+------------------------------------------|
| xuSet          |                                 |                 | A set of related XUs                     |
|----------------+---------------------------------+-----------------+------------------------------------------|
| xuSetTree      |                                 |                 | A set of related hierarchical XUs        |
|----------------+---------------------------------+-----------------+------------------------------------------|
| xuSetTreeName  |                                 |                 | Top of the tree maps to libName          |
|----------------+---------------------------------+-----------------+------------------------------------------|
| csxuPlayerRun  |                                 |                 | Command Line Construction+Run of a csxu  |
|                |                                 |                 | inside of a csPlayer                     |
|----------------+---------------------------------+-----------------+------------------------------------------|
| modPlayerRun   |                                 |                 | Command Line Construction+Run of a       |
|                |                                 |                 | csxuModProcessor with a csMod            |
|----------------+---------------------------------+-----------------+------------------------------------------|
| [[destinations]]   |                                 |                 | Remote Operation Performers of Runs      |
|----------------+---------------------------------+-----------------+------------------------------------------|

** Elaborations

<<xu>>               :: eXecution Unit is the broad term given to all that the csPlayer can run.
It includes:
        - CSXUs: All command services
        - csMod:  CS Modules through their module players
        - foreign commans:  Some non CS executables, such as git

<<xuLine>>           :: The full command line ready to be [[run]].

<<run>>              :: The generic concept of execting xuLine. Be it immediately or in scheduled for future.
Be it here or on a list of [[destinations]]. Be it serially or in parallel. In this model, you "run" an xuLine
as opposed to "execute" an xuLine. You run an executable.

<<csxuName.pcs>>     :: Planted Command Services. See NOTYET for details.

<<csxuName.spcs>>    :: Spread Planted Command Services. Based on [[csxuName.pcs]] but when current directory
is relevant.

<<csxuModPlayers>>   :: CSXU Module Players are CSXUs that can "load-in" into themselves [[csModules]].
See NOTYET for details.

<<csModules>>        :: Are python modules that can be loaded-in [[csxuModPlayers]] and run.
csModules often operate on a list of "targets" and can be run on multiple destinations.

<<destinations>>     :: Destinations  are list of platforms that can run XUs.
We distinguish between "destinations" and the generic term "servers" to indicate that
we have the concept of a destination for running the XUs in mind..

* Input Syntax of Values of Parameters and Arguments -- Python Literals

Unlike other command line processors, PyCS is directly tied to Python.
The type of parameters and arguments are known by CSXUs in Python Literals terms.

Lists and dictionaries are a common syntax for parameters.

* Output Syntax of Values of stdout of CSXUs -- Python Literals

Unlike other command line processors, where the stdout is unstrucured, CSXUs
stdout is Python Literals and the syntax is obtainable through CMNDs of CSXUs.


* Audit Trailed Running of CSXUs

Done with auditTrail.cs

** Stand Alone AuditTrail Runs

** Serial AuditTrail Runs

** Parallel AuditTrail Runs

* Web csPlayer -- csPlayerPerf, csLineInvoker, csPlayerUi

** csLineInvoker -- React

- Provides choice of a csxuPlayerRun or a modPlayerRun
- Presents xuSetTrees To users so that one csxuName or one csxuModProcessors (eg soncli.cs) is selected

- For selected csxuName -> next
- In a single page seprate out -> next
    - cmndName
    - csxuParams
    - cmndParams
    - cmndArgs
- Select Destinations -> next
  "Here" is the default
- Select Execution -> submit
   - Run now
   - Scheduled Run
   - If multiple Destinations
     - Run Serially
     - Run in Parallel
  - After submit, display The RunInstanceId and a  "New Command Line"


- For selected csxuModProcessors -> next
- In a single page seprate out -> next
    - csMod
    - csxuParams
    - csModParams
- If possibel Select Targets -> next -- Otherwise targets are modRun cmndArgs
    - Upload List or Specify or NuOfRandoms or All
    - Targets are added to params on cli construction
- Select Destinations -> next
    - If Uploaded List or Specified, Destinations must be one and only one
    - NuOfRandoms or All Destinations must be one or more
- Select Execution -> submit
   - Run now
   - Scheduled Run
   - If multiple Destinations
     - Run Serially
     - Run in Parallel
  - After submit, display The RunInstanceId and a  "New Command Line"

** csPlayerPerf -- Django

Knows no difference between csxu Runs and csxuModProcessor Runs.
They are all command lines to be run.

** csPlayerUI -- Gatsby

Wraps


* Remote Operation Cmnds -- RO-Cmnds

RPyC and DRF are supported by PyCS.

** RPyC Operations

Triggered by rtInv of Cmnd Class

** RPyC Invoker

Triggered by --perfName

** RPyC Performer

Systemd Daemon

** DRF Operations

Enabled by addition of xuSetTreeName as Django Lib of csPlayer

** DRF Invoker

Similar to auditTrail.cs, called drfInvoke.cs -- Uses --perfName of RPyC

** DRF Performer

Django CS player



# ###+BEGIN: blee:bxPanel:footerOrgParams :panelType "readme"
#+STARTUP: overview
#+STARTUP: lognotestate
#+STARTUP: inlineimages
#+SEQ_TODO: TODO WAITING DELEGATED | DONE DEFERRED CANCELLED
#+TAGS: @desk(d) @home(h) @work(w) @withInternet(i) @road(r) call(c) errand(e)
#+CATEGORY: U:csPlayer

# ###+END:

# ###+BEGIN: blee:bxPanel:footerEmacsParams :primMode "org-mode" :panelType "readme"
# Local Variables:
# eval: (setq-local toc-org-max-depth 4)
# eval: (setq-local ~selectedSubject "noSubject")
# eval: (setq-local ~primaryMajorMode 'org-mode)
# eval: (setq-local ~blee:panelUpdater nil)
# eval: (setq-local ~blee:dblockEnabler nil)
# eval: (setq-local ~blee:dblockController "interactive")
# eval: (img-link-overlays)
# eval: (set-fill-column 115)
# eval: (blee:fill-column-indicator/enable)
# eval: (bx:load-file:ifOneExists "./panelActions.el")
# End:

# ###+END
